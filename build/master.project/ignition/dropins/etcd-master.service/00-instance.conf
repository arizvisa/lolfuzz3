## Notes
# This service is used when there are no etcd clusters available, and so this
# member is guaranteed to be the master. This etcd instance will then be
# contacted by other instances that wish to join the cluster.

### Variables
# DEFAULT_IPV4 comes from /etc/network-environment

[Service]
Slice=machine.slice
ExecStart=
ExecStart=/bin/sh -c 'exec /lib/coreos/etcd-wrapper \
            --name=$(cat /etc/machine-id) \
            --advertise-client-urls="http://${DEFAULT_IPV4}:2379" \
            --initial-advertise-peer-urls="http://${DEFAULT_IPV4}:2380" \
            --initial-cluster="$(cat /etc/machine-id)=http://${DEFAULT_IPV4}:2380" \
            '
